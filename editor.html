<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ –†–µ–¥–∞–∫—Ç–æ—Ä Smart Video Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a1a3e 0%, #2d1b4e 100%);
            min-height: 100vh;
            color: #fff;
        }
        .editor-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        .panel {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        h1 {
            font-family: 'Fredoka', cursive;
            font-size: 2em;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 20px #00ffff;
        }
        h2 {
            font-family: 'Fredoka', cursive;
            color: #00ffff;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 700;
            color: #ffd700;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #00ffff;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            color: #fff;
            font-family: 'Nunito', sans-serif;
            font-size: 1em;
        }
        input[type="color"] {
            height: 50px;
            cursor: pointer;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(0,255,255,0.5);
        }
        .btn {
            background: linear-gradient(135deg, #00ffff, #0080ff);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-family: 'Fredoka', cursive;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
        }
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(0,255,255,0.6);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #ff6b6b, #ff4757);
        }
        .btn-success {
            background: linear-gradient(135deg, #00ff88, #00cc66);
        }
        .question-item {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(0,255,255,0.3);
        }
        .question-item h3 {
            color: #ffd700;
            margin-bottom: 10px;
        }
        .option-row {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
            align-items: center;
        }
        .option-row input {
            flex: 1;
        }
        .option-row select {
            width: 80px;
        }
        .option-row button {
            background: #ff4757;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        .preview-frame {
            width: 100%;
            height: 500px;
            border: 3px solid #00ffff;
            border-radius: 15px;
            background: #000;
        }
        .code-box {
            background: #1a1a2e;
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #00ff88;
            overflow-x: auto;
            margin-top: 15px;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid #00ffff;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }
        .tab.active {
            background: #00ffff;
            color: #000;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .color-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        @media (max-width: 1024px) {
            .editor-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="panel">
            <h1>üéÆ –†–µ–¥–∞–∫—Ç–æ—Ä Smart Video Player</h1>
            
            <div class="tabs">
                <div class="tab active" onclick="switchTab('basic')">‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ</div>
                <div class="tab" onclick="switchTab('questions')">‚ùì –í–æ–ø—Ä–æ—Å—ã</div>
                <div class="tab" onclick="switchTab('design')">üé® –î–∏–∑–∞–π–Ω</div>
                <div class="tab" onclick="switchTab('export')">üì§ –≠–∫—Å–ø–æ—Ä—Ç</div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="tab-basic" class="tab-content active">
                <h2>–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <div class="form-group">
                    <label>üì∫ –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (MP4)</label>
                    <input type="text" id="videoUrl" value="https://www.w3schools.com/html/mov_bbb.mp4" placeholder="https://...">
                </div>
                <div class="form-group">
                    <label>üåê –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                    <select id="language">
                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                        <option value="en">üá¨üáß English</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                        <option value="fr">üá´üá∑ Fran√ßais</option>
                        <option value="de">üá©üá™ Deutsch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üèÜ –ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã</label>
                    <input type="text" id="gameTitle" value="Smart Video Player">
                </div>
                <div class="form-group">
                    <label>üéØ –¢–∏–ø –≤–æ–ø—Ä–æ—Å–æ–≤</label>
                    <select id="questionType">
                        <option value="multiple">–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä</option>
                        <option value="truefalse">–í–µ—Ä–Ω–æ/–ù–µ–≤–µ—Ä–Ω–æ</option>
                        <option value="input">–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üöÄ –ò–∫–æ–Ω–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞</label>
                    <select id="progressIcon">
                        <option value="üöÄ">üöÄ –†–∞–∫–µ—Ç–∞</option>
                        <option value="‚≠ê">‚≠ê –ó–≤–µ–∑–¥–∞</option>
                        <option value="üéØ">üéØ –¶–µ–ª—å</option>
                        <option value="üí´">üí´ –ö–æ–º–µ—Ç–∞</option>
                        <option value="üé¨">üé¨ –ö–∏–Ω–æ</option>
                        <option value="">–ë–µ–∑ –∏–∫–æ–Ω–∫–∏</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üîä –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞ (URL)</label>
                    <input type="text" id="musicUrl" value="" placeholder="https://... (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                </div>
            </div>

            <!-- –í–æ–ø—Ä–æ—Å—ã -->
            <div id="tab-questions" class="tab-content">
                <h2>‚ùì –í–æ–ø—Ä–æ—Å—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h2>
                <div id="questionsList"></div>
                <button class="btn" onclick="addQuestion()">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            </div>

            <!-- –î–∏–∑–∞–π–Ω -->
            <div id="tab-design" class="tab-content">
                <h2>üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∏–∑–∞–π–Ω–∞</h2>
                <div class="color-grid">
                    <div class="form-group">
                        <label>–§–æ–Ω (–≥—Ä–∞–¥–∏–µ–Ω—Ç 1)</label>
                        <input type="color" id="bgColor1" value="#0a0a2a">
                    </div>
                    <div class="form-group">
                        <label>–§–æ–Ω (–≥—Ä–∞–¥–∏–µ–Ω—Ç 2)</label>
                        <input type="color" id="bgColor2" value="#1a0033">
                    </div>
                    <div class="form-group">
                        <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç</label>
                        <input type="color" id="primaryColor" value="#00ffff">
                    </div>
                    <div class="form-group">
                        <label>–í—Ç–æ—Ä–∏—á–Ω—ã–π —Ü–≤–µ—Ç</label>
                        <input type="color" id="secondaryColor" value="#0080ff">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫</label>
                        <input type="color" id="btnColor" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</label>
                        <input type="color" id="correctColor" value="#00ff88">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</label>
                        <input type="color" id="wrongColor" value="#ff4757">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                        <input type="color" id="textColor" value="#ffffff">
                    </div>
                </div>
                <div class="form-group">
                    <label>üåü –§–æ–Ω —Å–æ –∑–≤—ë–∑–¥–∞–º–∏</label>
                    <select id="starfield">
                        <option value="true">–í–∫–ª—é—á–∏—Ç—å</option>
                        <option value="false">–í—ã–∫–ª—é—á–∏—Ç—å</option>
                    </select>
                </div>
            </div>

            <!-- –≠–∫—Å–ø–æ—Ä—Ç -->
            <div id="tab-export" class="tab-content">
                <h2>üì§ –ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏</h2>
                <button class="btn btn-success" onclick="generateCode()">üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
                <button class="btn btn-secondary" onclick="copyCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn" onclick="downloadPlayer()">üíæ –°–∫–∞—á–∞—Ç—å player.html</button>
                <div class="code-box" id="exportCode"></div>
                <h3 style="margin: 20px 0 10px; color: #ffd700;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h3>
                <div id="stats"></div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
        <div class="panel">
            <h2>üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h2>
            <iframe id="previewFrame" class="preview-frame"></iframe>
            <button class="btn" onclick="updatePreview()" style="margin-top: 15px;">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let questions = [
            {
                time: 5,
                question: "–ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ 1?",
                options: ["A) –í–∞—Ä–∏–∞–Ω—Ç 1", "B) –í–∞—Ä–∏–∞–Ω—Ç 2", "C) –í–∞—Ä–∏–∞–Ω—Ç 3"],
                correct: "A",
                hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ 1"
            },
            {
                time: 15,
                question: "–ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ 2?",
                options: ["A) –í–∞—Ä–∏–∞–Ω—Ç 1", "B) –í–∞—Ä–∏–∞–Ω—Ç 2", "C) –í–∞—Ä–∏–∞–Ω—Ç 3"],
                correct: "B",
                hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ 2"
            }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            renderQuestions();
            updatePreview();
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // –†–µ–Ω–¥–µ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
        function renderQuestions() {
            const container = document.getElementById('questionsList');
            container.innerHTML = '';
            questions.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'question-item';
                item.innerHTML = `
                    <h3>–í–æ–ø—Ä–æ—Å #${index + 1} (–Ω–∞ ${q.time} —Å–µ–∫)</h3>
                    <div class="form-group">
                        <label>–í—Ä–µ–º—è (—Å–µ–∫)</label>
                        <input type="number" value="${q.time}" onchange="updateQuestion(${index}, 'time', this.value)">
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                        <input type="text" value="${q.question}" onchange="updateQuestion(${index}, 'question', this.value)">
                    </div>
                    <div class="form-group">
                        <label>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤</label>
                        ${q.options.map((opt, i) => `
                            <div class="option-row">
                                <input type="text" value="${opt}" onchange="updateOption(${index}, ${i}, this.value)">
                                <select onchange="updateCorrect(${index}, this.value)">
                                    <option value="A" ${q.correct === 'A' ? 'selected' : ''}>A</option>
                                    <option value="B" ${q.correct === 'B' ? 'selected' : ''}>B</option>
                                    <option value="C" ${q.correct === 'C' ? 'selected' : ''}>C</option>
                                </select>
                                <button onclick="removeOption(${index}, ${i})">√ó</button>
                            </div>
                        `).join('')}
                        <button class="btn" style="padding: 8px; font-size: 0.9em;" onclick="addOption(${index})">+ –í–∞—Ä–∏–∞–Ω—Ç</button>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ–¥—Å–∫–∞–∑–∫–∞</label>
                        <input type="text" value="${q.hint}" onchange="updateQuestion(${index}, 'hint', this.value)">
                    </div>
                    <button class="btn btn-secondary" onclick="removeQuestion(${index})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                `;
                container.appendChild(item);
            });
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function updateQuestion(index, field, value) {
            if (field === 'time') value = parseInt(value);
            questions[index][field] = value;
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        function updateOption(qIndex, oIndex, value) {
            questions[qIndex].options[oIndex] = value;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
        function updateCorrect(qIndex, value) {
            questions[qIndex].correct = value;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function addQuestion() {
            questions.push({
                time: questions.length * 10,
                question: "–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å?",
                options: ["A) –í–∞—Ä–∏–∞–Ω—Ç 1", "B) –í–∞—Ä–∏–∞–Ω—Ç 2", "C) –í–∞—Ä–∏–∞–Ω—Ç 3"],
                correct: "A",
                hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞"
            });
            renderQuestions();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function removeQuestion(index) {
            questions.splice(index, 1);
            renderQuestions();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        function addOption(qIndex) {
            const letters = ['A', 'B', 'C', 'D', 'E'];
            questions[qIndex].options.push(`${letters[questions[qIndex].options.length]}) –í–∞—Ä–∏–∞–Ω—Ç`);
            renderQuestions();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        function removeOption(qIndex, oIndex) {
            questions[qIndex].options.splice(oIndex, 1);
            renderQuestions();
        }

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        function updateStats() {
            document.getElementById('stats').innerHTML = `
                <p>üìä –í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: <strong>${questions.length}</strong></p>
                <p>‚è±Ô∏è –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: <strong>${Math.max(...questions.map(q => q.time)) + 10} —Å–µ–∫</strong></p>
            `;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function generateConfig() {
            return {
                videoUrl: document.getElementById('videoUrl').value,
                language: document.getElementById('language').value,
                gameTitle: document.getElementById('gameTitle').value,
                questionType: document.getElementById('questionType').value,
                progressIcon: document.getElementById('progressIcon').value,
                musicUrl: document.getElementById('musicUrl').value,
                questions: questions,
                design: {
                    bgColor1: document.getElementById('bgColor1').value,
                    bgColor2: document.getElementById('bgColor2').value,
                    primaryColor: document.getElementById('primaryColor').value,
                    secondaryColor: document.getElementById('secondaryColor').value,
                    btnColor: document.getElementById('btnColor').value,
                    correctColor: document.getElementById('correctColor').value,
                    wrongColor: document.getElementById('wrongColor').value,
                    textColor: document.getElementById('textColor').value,
                    starfield: document.getElementById('starfield').value === 'true'
                }
            };
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
        function generateCode() {
            const config = generateConfig();
            const configEncoded = encodeURIComponent(JSON.stringify(config));
            const playerUrl = window.location.href.replace('editor.html', 'player.html');
            const iframeCode = `<iframe src="${playerUrl}?config=${configEncoded}" width="100%" height="600" frameborder="0" allowfullscreen></iframe>`;
            document.getElementById('exportCode').textContent = iframeCode;
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
        function copyCode() {
            const code = document.getElementById('exportCode').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
        function updatePreview() {
            const config = generateConfig();
            const configEncoded = encodeURIComponent(JSON.stringify(config));
            const playerUrl = window.location.href.replace('editor.html', 'player.html');
            document.getElementById('previewFrame').src = `${playerUrl}?config=${configEncoded}`;
        }

        // –°–∫–∞—á–∞—Ç—å player.html
        function downloadPlayer() {
            alert('üí° –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª player.html –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –Ω–∞ GitHub Pages –≤–º–µ—Å—Ç–µ —Å editor.html');
        }
    </script>
</body>
</html>