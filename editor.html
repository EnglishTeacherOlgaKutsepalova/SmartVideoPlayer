<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ –†–µ–¥–∞–∫—Ç–æ—Ä Smart Video Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Nunito', sans-serif;
            background: linear-gradient(135deg, #1a1a3e 0%, #2d1b4e 100%);
            min-height: 100vh;
            color: #fff;
        }
        .editor-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        .panel {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        h1 {
            font-family: 'Fredoka', cursive;
            font-size: 2em;
            text-align: center;
            margin-bottom: 25px;
            text-shadow: 0 0 20px #00ffff;
            position: relative;
        }
        /* Glitch effect –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
        .glitch {
            position: relative;
            animation: glitch 2s infinite;
        }
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
        }
        .glitch::before {
            left: 2px; text-shadow: -2px 0 #ff00c1;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 5s infinite linear alternate-reverse;
        }
        .glitch::after {
            left: -2px; text-shadow: -2px 0 #00fff9;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 5s infinite linear alternate-reverse;
        }
        @keyframes glitch {
            0%, 90%, 100% { transform: translate(0); }
            92% { transform: translate(-2px, 2px); }
            94% { transform: translate(2px, -2px); }
            96% { transform: translate(-2px, -2px); }
            98% { transform: translate(2px, 2px); }
        }
        @keyframes glitch-anim {
            0% { clip: rect(30px, 9999px, 10px, 0); }
            20% { clip: rect(80px, 9999px, 90px, 0); }
            40% { clip: rect(10px, 9999px, 60px, 0); }
            60% { clip: rect(50px, 9999px, 20px, 0); }
            80% { clip: rect(20px, 9999px, 80px, 0); }
            100% { clip: rect(70px, 9999px, 40px, 0); }
        }
        @keyframes glitch-anim2 {
            0% { clip: rect(10px, 9999px, 80px, 0); }
            20% { clip: rect(60px, 9999px, 20px, 0); }
            40% { clip: rect(90px, 9999px, 40px, 0); }
            60% { clip: rect(30px, 9999px, 70px, 0); }
            80% { clip: rect(50px, 9999px, 10px, 0); }
            100% { clip: rect(80px, 9999px, 60px, 0); }
        }
        h2 {
            font-family: 'Fredoka', cursive;
            color: #00ffff;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        .form-group { margin-bottom: 15px; }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 700;
            color: #ffd700;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #00ffff;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            color: #fff;
            font-family: 'Nunito', sans-serif;
            font-size: 1em;
        }
        input[type="color"] { height: 50px; cursor: pointer; }
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(0,255,255,0.5);
        }
        .btn {
            background: linear-gradient(135deg, #00ffff, #0080ff);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-family: 'Fredoka', cursive;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
        }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 25px rgba(0,255,255,0.6); }
        .btn-secondary { background: linear-gradient(135deg, #ff6b6b, #ff4757); }
        .btn-success { background: linear-gradient(135deg, #00ff88, #00cc66); }
        .question-item {
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(0,255,255,0.3);
        }
        .question-item h3 { color: #ffd700; margin-bottom: 10px; }
        .option-row {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
            align-items: center;
        }
        .option-row input { flex: 1; }
        .option-row button {
            background: #ff4757;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }
        .preview-frame {
            width: 100%;
            height: 500px;
            border: 3px solid #00ffff;
            border-radius: 15px;
            background: #000;
        }
        .code-box {
            background: #1a1a2e;
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #00ff88;
            overflow-x: auto;
            margin-top: 15px;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 2px solid #00ffff;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s;
        }
        .tab.active { background: #00ffff; color: #000; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .color-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .notice {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #ffd700;
        }
        .template-btn {
            background: rgba(0,255,255,0.2);
            border: 1px dashed #00ffff;
            padding: 10px;
            border-radius: 10px;
            margin: 5px 0;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s;
        }
        .template-btn:hover {
            background: rgba(0,255,255,0.4);
            transform: translateX(5px);
        }
        .question-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .question-type-selector button {
            flex: 1;
            padding: 10px;
            border: 2px solid #00ffff;
            border-radius: 10px;
            background: rgba(0,0,0,0.3);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s;
        }
        .question-type-selector button.active {
            background: #00ffff;
            color: #000;
        }
        @media (max-width: 1024px) {
            .editor-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="editor-container">
        <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="panel">
            <h1 class="glitch" data-text="üéÆ –†–µ–¥–∞–∫—Ç–æ—Ä Smart Video Player">üéÆ –†–µ–¥–∞–∫—Ç–æ—Ä Smart Video Player</h1>
            
            <div class="tabs">
                <div class="tab active" onclick="switchTab('basic')">‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ</div>
                <div class="tab" onclick="switchTab('questions')">‚ùì –í–æ–ø—Ä–æ—Å—ã</div>
                <div class="tab" onclick="switchTab('design')">üé® –î–∏–∑–∞–π–Ω</div>
                <div class="tab" onclick="switchTab('export')">üì§ –≠–∫—Å–ø–æ—Ä—Ç</div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="tab-basic" class="tab-content active">
                <h2>–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                
                <div class="form-group">
                    <label>üé¨ –¢–∏–ø –≤–∏–¥–µ–æ-–∏—Å—Ç–æ—á–Ω–∏–∫–∞</label>
                    <select id="videoSourceType" onchange="toggleVideoSourceFields()">
                        <option value="direct">üìÅ –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ (MP4)</option>
                        <option value="youtube">üì∫ YouTube (iframe)</option>
                        <option value="rutube">üé• Rutube (iframe)</option>
                        <option value="yandex">‚òÅÔ∏è –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ (iframe)</option>
                        <option value="google">üóÇÔ∏è Google Drive (iframe)</option>
                    </select>
                </div>
                
                <div id="directSourceField" class="form-group">
                    <label>üì∫ –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ (MP4)</label>
                    <input type="text" id="videoUrl" value="https://www.w3schools.com/html/mov_bbb.mp4" placeholder="https://...video.mp4">
                </div>
                
                <div id="iframeSourceField" class="form-group" style="display: none;">
                    <label>üîó Iframe –∫–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –≤–∏–¥–µ–æ</label>
                    <textarea id="videoIframe" rows="4" placeholder='<iframe src="https://..." allowfullscreen></iframe>'></textarea>
                    <small style="color: #aaa; display: block; margin-top: 5px;">
                        üí° –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –≤—Å—Ç–∞–≤–∫–∏ –∏–∑ YouTube/Rutube/–î–∏—Å–∫–∞
                    </small>
                </div>
                
                <div class="form-group">
                    <label>üåê –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                    <select id="language">
                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                        <option value="en">üá¨üáß English</option>
                        <option value="es">üá™üá∏ Espa√±ol</option>
                        <option value="fr">üá´üá∑ Fran√ßais</option>
                        <option value="de">üá©üá™ Deutsch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üèÜ –ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã</label>
                    <input type="text" id="gameTitle" value="Smart Video Player">
                </div>
                <div class="form-group">
                    <label>üöÄ –ò–∫–æ–Ω–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞</label>
                    <select id="progressIcon">
                        <option value="üöÄ">üöÄ –†–∞–∫–µ—Ç–∞</option>
                        <option value="‚≠ê">‚≠ê –ó–≤–µ–∑–¥–∞</option>
                        <option value="üéØ">üéØ –¶–µ–ª—å</option>
                        <option value="üí´">üí´ –ö–æ–º–µ—Ç–∞</option>
                        <option value="üé¨">üé¨ –ö–∏–Ω–æ</option>
                        <option value="‚ú®">‚ú® –ë–ª–µ—Å–∫</option>
                        <option value="">–ë–µ–∑ –∏–∫–æ–Ω–∫–∏</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üé≠ –ê–Ω–∏–º–∞—Ü–∏—è –∏–∫–æ–Ω–∫–∏ –Ω–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–µ</label>
                    <select id="iconAnimation">
                        <option value="none">–ë–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏</option>
                        <option value="bounce">üîÑ –ü—Ä—ã–∂–∫–∏</option>
                        <option value="spin">üåÄ –í—Ä–∞—â–µ–Ω–∏–µ</option>
                        <option value="pulse">üíì –ü—É–ª—å—Å–∞—Ü–∏—è</option>
                        <option value="swing">üé™ –ö–∞—á–∞–Ω–∏–µ</option>
                    </select>
                </div>
            </div>

            <!-- –í–æ–ø—Ä–æ—Å—ã -->
            <div id="tab-questions" class="tab-content">
                <h2>‚ùì –í–æ–ø—Ä–æ—Å—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h2>
                
                <div class="question-type-selector">
                    <button type="button" class="active" onclick="setQuestionType('multiple', this)">üîò –í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞</button>
                    <button type="button" onclick="setQuestionType('input', this)">‚å®Ô∏è –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞</button>
                </div>
                
                <div id="templatesSection">
                    <h3 style="color: #ffd700; margin-bottom: 10px;">üìã –®–∞–±–ª–æ–Ω—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:</h3>
                    <div class="template-btn" onclick="addQuestionFromTemplate('multiple')">
                        ‚ûï –®–∞–±–ª–æ–Ω: –í–æ–ø—Ä–æ—Å —Å –≤—ã–±–æ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞ (A/B/C)
                    </div>
                    <div class="template-btn" onclick="addQuestionFromTemplate('input')">
                        ‚ûï –®–∞–±–ª–æ–Ω: –í–æ–ø—Ä–æ—Å —Å –≤–≤–æ–¥–æ–º —Ç–µ–∫—Å—Ç–∞
                    </div>
                </div>
                
                <div id="questionsList" style="margin-top: 20px;"></div>
                <button class="btn" onclick="addQuestion()">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            </div>

            <!-- –î–∏–∑–∞–π–Ω -->
            <div id="tab-design" class="tab-content">
                <h2>üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–∏–∑–∞–π–Ω–∞</h2>
                <div class="color-grid">
                    <div class="form-group">
                        <label>–§–æ–Ω (–≥—Ä–∞–¥–∏–µ–Ω—Ç 1)</label>
                        <input type="color" id="bgColor1" value="#0a0a2a">
                    </div>
                    <div class="form-group">
                        <label>–§–æ–Ω (–≥—Ä–∞–¥–∏–µ–Ω—Ç 2)</label>
                        <input type="color" id="bgColor2" value="#1a0033">
                    </div>
                    <div class="form-group">
                        <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç</label>
                        <input type="color" id="primaryColor" value="#00ffff">
                    </div>
                    <div class="form-group">
                        <label>–í—Ç–æ—Ä–∏—á–Ω—ã–π —Ü–≤–µ—Ç</label>
                        <input type="color" id="secondaryColor" value="#0080ff">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫</label>
                        <input type="color" id="btnColor" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</label>
                        <input type="color" id="correctColor" value="#00ff88">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞</label>
                        <input type="color" id="wrongColor" value="#ff4757">
                    </div>
                    <div class="form-group">
                        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                        <input type="color" id="textColor" value="#ffffff">
                    </div>
                </div>
                <div class="form-group">
                    <label>üåü –§–æ–Ω —Å–æ –∑–≤—ë–∑–¥–∞–º–∏</label>
                    <select id="starfield">
                        <option value="true">–í–∫–ª—é—á–∏—Ç—å</option>
                        <option value="false">–í—ã–∫–ª—é—á–∏—Ç—å</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>‚ú® –ì–ª–∏—Ç—á-—ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞</label>
                    <select id="glitchEffect">
                        <option value="true">–í–∫–ª—é—á–∏—Ç—å</option>
                        <option value="false">–í—ã–∫–ª—é—á–∏—Ç—å</option>
                    </select>
                </div>
            </div>

            <!-- –≠–∫—Å–ø–æ—Ä—Ç -->
            <div id="tab-export" class="tab-content">
                <h2>üì§ –ö–æ–¥ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏</h2>
                <div class="form-group">
                    <label>üîó URL –≤–∞—à–µ–≥–æ player.html</label>
                    <input type="text" id="playerUrl" placeholder="https://yoursite.com/player.html">
                    <small style="color: #aaa; display: block; margin-top: 5px;">
                        üí° –ü—Ä–∏–º–µ—Ä: https://englishteacherolgakutsepalova.github.io/SmartVideoPlayer/player.html
                    </small>
                </div>
                <button class="btn btn-success" onclick="generateCode()">üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
                <button class="btn" onclick="copyCode()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                <button class="btn btn-secondary" onclick="downloadConfig()">üíæ –°–∫–∞—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ (JSON)</button>
                <div class="code-box" id="exportCode"></div>
                <h3 style="margin: 20px 0 10px; color: #ffd700;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</h3>
                <div id="stats"></div>
            </div>
        </div>

        <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
        <div class="panel">
            <h2>üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h2>
            <iframe id="previewFrame" class="preview-frame" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
            <button class="btn" onclick="updatePreview()" style="margin-top: 15px;">üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
            <div id="previewStatus" style="margin-top: 10px; color: #ffd700;"></div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        let questions = [
            {
                type: 'multiple',
                time: 5,
                question: "–ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ —Å –≤—ã–±–æ—Ä–æ–º?",
                options: ["–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2", "–í–∞—Ä–∏–∞–Ω—Ç 3"],
                correct: "A",
                hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ 1"
            },
            {
                type: 'input',
                time: 15,
                question: "–ü—Ä–∏–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ —Å –≤–≤–æ–¥–æ–º?",
                correctAnswer: "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç",
                hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ 2"
            }
        ];
        
        let currentQuestionType = 'multiple';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            renderQuestions();
            const currentUrl = window.location.href;
            const playerUrl = currentUrl.replace('editor.html', 'player.html');
            document.getElementById('playerUrl').value = playerUrl;
            updatePreview();
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–∞
        function setQuestionType(type, btn) {
            currentQuestionType = type;
            document.querySelectorAll('.question-type-selector button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞
        function addQuestionFromTemplate(type) {
            if (type === 'multiple') {
                questions.push({
                    type: 'multiple',
                    time: questions.length > 0 ? questions[questions.length - 1].time + 10 : 5,
                    question: "–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å?",
                    options: ["–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2", "–í–∞—Ä–∏–∞–Ω—Ç 3"],
                    correct: "A",
                    hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞"
                });
            } else {
                questions.push({
                    type: 'input',
                    time: questions.length > 0 ? questions[questions.length - 1].time + 10 : 5,
                    question: "–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç:",
                    correctAnswer: "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç",
                    hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞"
                });
            }
            renderQuestions();
        }

        // –†–µ–Ω–¥–µ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
        function renderQuestions() {
            const container = document.getElementById('questionsList');
            container.innerHTML = '';
            questions.forEach((q, index) => {
                const item = document.createElement('div');
                item.className = 'question-item';
                
                if (q.type === 'multiple') {
                    item.innerHTML = `
                        <h3>üîò –í–æ–ø—Ä–æ—Å #${index + 1} (–Ω–∞ ${q.time} —Å–µ–∫)</h3>
                        <div class="form-group">
                            <label>–í—Ä–µ–º—è (—Å–µ–∫)</label>
                            <input type="number" value="${q.time}" onchange="updateQuestion(${index}, 'time', parseInt(this.value))">
                        </div>
                        <div class="form-group">
                            <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                            <input type="text" value="${q.question}" onchange="updateQuestion(${index}, 'question', this.value)">
                        </div>
                        <div class="form-group">
                            <label>–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤</label>
                            ${q.options.map((opt, i) => `
                                <div class="option-row">
                                    <input type="text" value="${opt}" onchange="updateOption(${index}, ${i}, this.value)">
                                    <button onclick="removeOption(${index}, ${i})">√ó</button>
                                </div>
                            `).join('')}
                            <button class="btn" style="padding: 8px; font-size: 0.9em; margin-top: 5px;" onclick="addOption(${index})">+ –í–∞—Ä–∏–∞–Ω—Ç</button>
                        </div>
                        <div class="form-group">
                            <label>‚úÖ –ë—É–∫–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (A, B, C...)</label>
                            <input type="text" value="${q.correct}" maxlength="1" style="width: 60px; text-transform: uppercase;" onchange="updateQuestion(${index}, 'correct', this.value.toUpperCase())">
                        </div>
                        <div class="form-group">
                            <label>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</label>
                            <input type="text" value="${q.hint}" onchange="updateQuestion(${index}, 'hint', this.value)">
                        </div>
                    `;
                } else {
                    item.innerHTML = `
                        <h3>‚å®Ô∏è –í–æ–ø—Ä–æ—Å #${index + 1} (–Ω–∞ ${q.time} —Å–µ–∫)</h3>
                        <div class="form-group">
                            <label>–í—Ä–µ–º—è (—Å–µ–∫)</label>
                            <input type="number" value="${q.time}" onchange="updateQuestion(${index}, 'time', parseInt(this.value))">
                        </div>
                        <div class="form-group">
                            <label>–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞</label>
                            <input type="text" value="${q.question}" onchange="updateQuestion(${index}, 'question', this.value)">
                        </div>
                        <div class="form-group">
                            <label>‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç (—Ç–µ–∫—Å—Ç)</label>
                            <input type="text" value="${q.correctAnswer}" onchange="updateQuestion(${index}, 'correctAnswer', this.value)">
                        </div>
                        <div class="form-group">
                            <label>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</label>
                            <input type="text" value="${q.hint}" onchange="updateQuestion(${index}, 'hint', this.value)">
                        </div>
                    `;
                }
                
                item.innerHTML += `<button class="btn btn-secondary" onclick="removeQuestion(${index})" style="margin-top: 10px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>`;
                container.appendChild(item);
            });
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function updateQuestion(index, field, value) {
            questions[index][field] = value;
            updateStats();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        function updateOption(qIndex, oIndex, value) {
            questions[qIndex].options[oIndex] = value;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function addQuestion() {
            if (currentQuestionType === 'multiple') {
                const letters = ['A', 'B', 'C', 'D', 'E'];
                questions.push({
                    type: 'multiple',
                    time: questions.length > 0 ? questions[questions.length - 1].time + 10 : 5,
                    question: "–ù–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å?",
                    options: ["–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2", "–í–∞—Ä–∏–∞–Ω—Ç 3"],
                    correct: "A",
                    hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞"
                });
            } else {
                questions.push({
                    type: 'input',
                    time: questions.length > 0 ? questions[questions.length - 1].time + 10 : 5,
                    question: "–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç:",
                    correctAnswer: "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç",
                    hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞"
                });
            }
            renderQuestions();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
        function removeQuestion(index) {
            questions.splice(index, 1);
            renderQuestions();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        function addOption(qIndex) {
            questions[qIndex].options.push("–ù–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç");
            renderQuestions();
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
        function removeOption(qIndex, oIndex) {
            questions[qIndex].options.splice(oIndex, 1);
            renderQuestions();
        }

        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
        function updateStats() {
            const maxTime = questions.length > 0 ? Math.max(...questions.map(q => q.time)) : 0;
            document.getElementById('stats').innerHTML = `
                <p>üìä –í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: <strong>${questions.length}</strong></p>
                <p>‚è±Ô∏è –ú–∏–Ω. –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ: <strong>${maxTime + 10} —Å–µ–∫</strong></p>
            `;
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤–∏–¥–µ–æ
        function toggleVideoSourceFields() {
            const type = document.getElementById('videoSourceType').value;
            const directField = document.getElementById('directSourceField');
            const iframeField = document.getElementById('iframeSourceField');
            
            if (type === 'direct') {
                directField.style.display = 'block';
                iframeField.style.display = 'none';
            } else {
                directField.style.display = 'none';
                iframeField.style.display = 'block';
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function generateConfig() {
            const videoSourceType = document.getElementById('videoSourceType').value;
            return {
                videoSourceType: videoSourceType,
                videoUrl: document.getElementById('videoUrl').value,
                videoIframe: document.getElementById('videoIframe').value,
                language: document.getElementById('language').value,
                gameTitle: document.getElementById('gameTitle').value,
                progressIcon: document.getElementById('progressIcon').value,
                iconAnimation: document.getElementById('iconAnimation').value,
                questions: questions,
                design: {
                    bgColor1: document.getElementById('bgColor1').value,
                    bgColor2: document.getElementById('bgColor2').value,
                    primaryColor: document.getElementById('primaryColor').value,
                    secondaryColor: document.getElementById('secondaryColor').value,
                    btnColor: document.getElementById('btnColor').value,
                    correctColor: document.getElementById('correctColor').value,
                    wrongColor: document.getElementById('wrongColor').value,
                    textColor: document.getElementById('textColor').value,
                    starfield: document.getElementById('starfield').value === 'true',
                    glitchEffect: document.getElementById('glitchEffect').value === 'true'
                }
            };
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
        function generateCode() {
            const config = generateConfig();
            const playerUrl = document.getElementById('playerUrl').value.trim();
            
            if (!playerUrl) {
                alert('‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ URL –≤–∞—à–µ–≥–æ player.html');
                return;
            }
            
            const configJson = JSON.stringify(config);
            const configEncoded = btoa(unescape(encodeURIComponent(configJson)));
            
            const iframeCode = `<iframe src="${playerUrl}?config=${configEncoded}" width="100%" height="600" frameborder="0" allowfullscreen allow="autoplay"></iframe>`;
            
            document.getElementById('exportCode').textContent = iframeCode;
            document.getElementById('previewStatus').innerHTML = '‚úÖ –ö–æ–¥ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω! –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ.';
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
        function copyCode() {
            const code = document.getElementById('exportCode').textContent;
            if (!code) {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–¥!');
                return;
            }
            navigator.clipboard.writeText(code).then(() => {
                alert('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            }).catch(() => {
                const textarea = document.createElement('textarea');
                textarea.value = code;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            });
        }

        // –°–∫–∞—á–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥
        function downloadConfig() {
            const config = generateConfig();
            const configJson = JSON.stringify(config, null, 2);
            const blob = new Blob([configJson], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'video-player-config.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
        function updatePreview() {
            const config = generateConfig();
            const playerUrl = document.getElementById('playerUrl').value.trim() || window.location.href.replace('editor.html', 'player.html');
            
            const configJson = JSON.stringify(config);
            const configEncoded = btoa(unescape(encodeURIComponent(configJson)));
            
            const previewFrame = document.getElementById('previewFrame');
            previewFrame.src = `${playerUrl}?config=${configEncoded}`;
            
            document.getElementById('previewStatus').innerHTML = 'üîÑ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –æ–±–Ω–æ–≤–ª—ë–Ω.';
            
            previewFrame.onload = () => { console.log('‚úÖ Preview loaded'); };
            previewFrame.onerror = () => {
                document.getElementById('previewStatus').innerHTML = '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å player.html.';
            };
        }
    </script>
</body>
</html>
